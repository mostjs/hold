{"version":3,"file":"hold.js","sources":["..//home/tylor/code/most/hold/src/index.js"],"sourcesContent":["/** @license MIT License (c) copyright 2015-2016 original author or authors */\n/** @author Brian Cavalier */\n'use strict'\n\nimport { MulticastSource } from '@most/multicast'\n\n// hold :: Stream a -> Stream a\nexport default stream => new stream.constructor(new MulticastSource(new Hold(stream.source)))\n\nclass Hold {\n  constructor (source) {\n    this.source = source\n    this.time = -Infinity\n    this.value = void 0\n  }\n\n  run (sink, scheduler) {\n    /* istanbul ignore else */\n    if (sink._hold !== this) {\n      sink._hold = this\n      sink._holdAdd = sink.add\n      sink.add = holdAdd\n\n      sink._holdEvent = sink.event\n      sink.event = holdEvent\n    }\n\n    return this.source.run(sink, scheduler)\n  }\n}\n\nfunction holdAdd (sink) {\n  const len = this._holdAdd(sink)\n  /* istanbul ignore else */\n  if (this._hold.time >= 0) {\n    sink.event(this._hold.time, this._hold.value)\n  }\n  return len\n}\n\nfunction holdEvent (t, x) {\n  /* istanbul ignore else */\n  if (t >= this._hold.time) {\n    this._hold.time = t\n    this._hold.value = x\n  }\n  return this._holdEvent(t, x)\n}\n"],"names":["MulticastSource"],"mappings":";;;;;;;kBAOe,MAAM,EAAC,SAAG,IAAI,MAAM,CAAC,WAAW,CAAC,IAAI,+BAAe,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;;EAE7F,IAAM,IAAI,GAAC,aACE,EAAE,MAAM,EAAE;IACrB,IAAM,CAAC,MAAM,GAAG;IAChB,IAAM,CAAC,IAAI,GAAG,CAAC;IACf,IAAM,CAAC,KAAK,GAAG,KAAK;GACnB;;EAEH,eAAE,GAAG,iBAAE,IAAI,EAAE,SAAS,EAAE;;IAEtB,IAAM,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;MACzB,IAAM,CAAC,KAAK,GAAG;MACf,IAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;MACvB,IAAM,CAAC,GAAG,GAAG;;MAEb,IAAM,CAAC,UAAU,GAAG,IAAI,CAAC;MACzB,IAAM,CAAC,KAAK,GAAG;;;IAGjB,OAAS,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS;GACvC;;EAGH,SAAS,OAAO,EAAE,IAAI,EAAE;IACtB,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI;;IAE9B,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,EAAE;MACxB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;;IAE9C,OAAO;;;EAGT,SAAS,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE;;IAExB,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;MACxB,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG;MAClB,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;;IAErB,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;;;;;"}