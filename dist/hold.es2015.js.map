{"version":3,"file":"hold.es2015.js","sources":["..//home/tylor/code/most/hold/src/index.js"],"sourcesContent":["/** @license MIT License (c) copyright 2015-2016 original author or authors */\n/** @author Brian Cavalier */\n'use strict'\n\nimport { MulticastSource } from '@most/multicast'\n\n// hold :: Stream a -> Stream a\nexport default stream => new stream.constructor(new MulticastSource(new Hold(stream.source)))\n\nexport class Hold {\n  constructor (source) {\n    this.source = source\n    this.time = -Infinity\n    this.value = void 0\n  }\n\n  run (sink, scheduler) {\n    /* istanbul ignore else */\n    if (sink._hold !== this) {\n      sink._hold = this\n      sink._holdAdd = sink.add\n      sink.add = holdAdd\n\n      sink._holdEvent = sink.event\n      sink.event = holdEvent\n    }\n\n    return this.source.run(sink, scheduler)\n  }\n}\n\nfunction holdAdd (sink) {\n  const len = this._holdAdd(sink)\n  /* istanbul ignore else */\n  if (this._hold.time >= 0) {\n    sink.event(this._hold.time, this._hold.value)\n  }\n  return len\n}\n\nfunction holdEvent (t, x) {\n  /* istanbul ignore else */\n  if (t >= this._hold.time) {\n    this._hold.time = t\n    this._hold.value = x\n  }\n  return this._holdEvent(t, x)\n}\n"],"names":[],"mappings":";;;gBAOe,MAAM,EAAC,SAAG,IAAI,MAAM,CAAC,WAAW,CAAC,IAAI,eAAe,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;;AAEtF,IAAM,IAAI,GAAC,aACL,EAAE,MAAM,EAAE;EACrB,IAAM,CAAC,MAAM,GAAG;EAChB,IAAM,CAAC,IAAI,GAAG,CAAC;EACf,IAAM,CAAC,KAAK,GAAG,KAAK;CACnB;;AAEH,eAAE,GAAG,iBAAE,IAAI,EAAE,SAAS,EAAE;;EAEtB,IAAM,IAAI,CAAC,KAAK,KAAK,IAAI,EAAE;IACzB,IAAM,CAAC,KAAK,GAAG;IACf,IAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,IAAM,CAAC,GAAG,GAAG;;IAEb,IAAM,CAAC,UAAU,GAAG,IAAI,CAAC;IACzB,IAAM,CAAC,KAAK,GAAG;;;EAGjB,OAAS,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS;CACvC;;AAGH,SAAS,OAAO,EAAE,IAAI,EAAE;EACtB,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI;;EAE9B,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,EAAE;IACxB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;;EAE9C,OAAO;;;AAGT,SAAS,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE;;EAExB,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;IACxB,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG;IAClB,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;;EAErB,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;;;"}